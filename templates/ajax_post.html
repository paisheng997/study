<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Post请求</title>
    <script src="/static/js/jquery.min.js"></script>
</head>
<body>
<form action="">
    姓名<input type="text" name="username" id="username"><br>
    密码<input type="password" name="password" id="password"><br>
    <input type="button" id="button" value="注册">
</form>
<p id="text"></p>
<script>
    $('#username').blur(
        function () {
            username = $('#username').val()
            send_data = {
                username: username,
                csrfmiddlewaretoken: '{{ csrf_token }}'
            }
            url = '/ajax_post_data/'
            $.ajax(
                {
                    url: url,
                    type: 'post',
                    data: send_data,
                    success: function (data) {
                        $('#text').text(data.msg)
                    },
                    error: function (error) {
                        $('#text').text(error)
                    }
                }
            )
        }
    )
    $('#button').click(
        function () {
            username = $('#username').val()
            password = $('#password').val()
            send_data = {
                username:username,
                password:password,
                csrfmiddlewaretoken:'{{ csrf_token }}'
            }
            url = '/ajax_post_data/'
            $.ajax(
                {
                    url:url,
                    type:'post',
                    data:send_data,
                    success:function (data) {
                        $('#text').text(data.msg)
                    },
                    error:function (error) {
                        $('#text').text(error)
                    }
                }
            )
        }
    )
</script>
</body>
</html>